function Menu() {
    titleText = game.add.bitmapText(game.world.centerX-200, game.world.centerY, 'carrier_command', 'Dungeon Coders', 34);
    startText = game.add.bitmapText(game.world.centerX, game.world.centerY+200, 'carrier_command', 'Start Game', 12);
    startText.inputEnabled = true;
    startText.events.onInputDown.add(Game);
}

function Game() {

        //  We need to enable physics on the player and set world bounds
    game.physics.startSystem(Phaser.Physics.P2JS);

    //Tilemap and CollisionGroup
    map = game.add.tilemap('level');
    map.addTilesetImage('hyptosis_tile-art-batch-1','tiles1');
    map.addTilesetImage('hyptosis_tile-art-batch-2','tiles2');
    objectsCG = game.physics.p2.createCollisionGroup();
    wallsCG =  game.physics.p2.createCollisionGroup();
    playerCG = game.physics.p2.createCollisionGroup();
    walls = game.physics.p2.convertCollisionObjects(map, "collision", true);
    for(var wall in walls)
    {
        walls[wall].setCollisionGroup(wallsCG);
        walls[wall].collides(playerCG);
    }
    //  Our tiled scrolling background
    level = map.createLayer("background");
    level.fixedToCamera = true;
    level.resizeWorld();
    layer2 = map.createLayer("objects");
    layer2.resizeWorld();
    map.setCollisionBetween(1, 12);
    game.physics.p2.convertTilemap(map, level);
    //create the teleporters
    level1teleport = new Phaser.Rectangle(165, 225, 25, 25);
    hometeleport1 = new Phaser.Rectangle(2660,200,15,15);

      player = new Dude(myId);
      playersList[myId] = player;
    console.log(player + 'created');
      dude = player.dude;

    game.physics.p2.setBoundsToWorld(true, true, true, true, false);
    //camera system
    game.camera.setBoundsToWorld();
    game.camera.follow(player.dude);

    //announce us as a new player
    playerjoin(myId);


    //Instructions
    //bmpText = game.add.bitmapText(10, 100, 'carrier_command','Drag me around !',12);

    //spawn the other players on the server
    <% if @players %>
      <% @players.uniq.each do |x| %>
        spawnPlayer('<%= x %>');
      <% end %>
    <% end %>
}